/**
 * @fileOverview \u9009\u62e9\u5668
 * @ignore
 */define("bui/extensions/multiselect/multilistpicker",["bui/overlay","bui/picker"],function(e){var t=e("bui/overlay").Dialog,n=e("bui/picker").Mixin,r=t.extend([n],{setSelectedValue:function(e){var t=this,n=t.get("innerControl"),r=n.get("store");if(!this.get("isInit")&&e){e=e.split(",");function i(){t._syncValue(e),r.off("load",i)}r.get("url")?r.on("load",i):t._syncValue(e)}},_syncValue:function(e){var t=this,n=t.get("innerControl"),r=t._getTextField(),i=n.get("source").get("idField"),s=n.get("store"),o=s.getResult(),u=[],a=[];BUI.each(o,function(t){$.inArray(t[i],e)!==-1&&(u.push(t),a.push(t.text))}),$(r).val(a.join(",")),BUI.each(u,function(e){s.remove(e)}),n.get("target").setItems(u)},getSelectedValue:function(){var e=this,t=e.get("innerControl"),n=t.get("target");return e._getItemsValue(n)},getSelectedText:function(){var e=this,t=e.get("innerControl"),n=t.get("target");return e._getItemsText(n)},_getItemsText:function(e,t){return t||(t=e.get("items")),$.map(t,function(t){return e.getItemText(t)})},_getItemsValue:function(e,t){var n=e.get("idField");return t||(t=e.get("items")),$.map(t,function(t){return e.getValueByField(t,n)})}},{ATTRS:{success:{value:function(){var e=this;e.get("innerControl").fire(e.get("changeEvent")),this.close()}}}},{xclass:"multilist-picker"});return r});
